# --- Nomes de Arquivo e Diret√≥rios ---
TARGET      = jogo-pif
SRCDIR      = src
INCDIR      = include
BUILDDIR    = build
ASSETDIR    = assets

# Encontra todos os arquivos .c na pasta src/
SRC         = $(wildcard $(SRCDIR)/*.c)
# Converte .c -> .o dentro da pasta build/
OBJ         = $(patsubst $(SRCDIR)/%.c,$(BUILDDIR)/%.o,$(SRC))

# --- Configura√ß√µes do Compilador ---
CC          = gcc
CFLAGS      = -I$(INCDIR) -Wall -Wextra -std=c99 -O2

# --- Configura√ß√µes da Raylib (Linux/WSL) ---
LDFLAGS     = -lraylib -lGL -lm -lpthread -ldl -lrt -lX11

# --- Regras Principais ---
.PHONY: all clean run assets

all: $(BUILDDIR) $(TARGET)

# Cria a pasta build se n√£o existir
$(BUILDDIR):
	@mkdir -p $(BUILDDIR)

# Linka os objetos e cria o execut√°vel
$(TARGET): $(OBJ)
	$(CC) $(OBJ) -o $(TARGET) $(LDFLAGS)
	@echo "‚úÖ Build completo: ./$(TARGET)"

# Compila os .c individualmente
$(BUILDDIR)/%.o: $(SRCDIR)/%.c
	$(CC) $(CFLAGS) -c $< -o $@

# Executa o jogo (assegurando que o som/imagens sejam encontrados)
run: $(TARGET)
	@echo "üéÆ Executando $(TARGET)..."
	@./$(TARGET)

# Limpa o projeto
clean:
	@rm -rf $(BUILDDIR) $(TARGET)
	@echo "üßπ Projeto limpo!"

# Cria as pastas de assets se ainda n√£o existirem
assets:
	@mkdir -p $(ASSETDIR)/sounds
	@mkdir -p $(ASSETDIR)/textures
	@mkdir -p $(ASSETDIR)/fonts
	@echo "üìÅ Pastas de assets criadas com sucesso!"
